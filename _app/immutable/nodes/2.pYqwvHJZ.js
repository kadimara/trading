import{a as R,t as O,b as Z,c as $}from"../chunks/disclose-version.C05CZ3lZ.js";import{ab as Re,b as Te,h as A,s as ee,a as Se,w as Ne,av as ce,H as Le,r as se,c as te,f as q,ax as G,d as ue,e as ve,p as Ee,t as oe,ay as Ae,az as Pe,ak as Ce,aA as De,af as Fe,ac as Oe,as as Ie,am as Me,a9 as He,j as le,aB as Ue,aC as qe,aD as Be,aq as je,W as fe,N as Y,R as F,T as E,P,Q as J,O as j,q as d,V as y,K as ae,D as ze,aj as I,l as D}from"../chunks/runtime.1f-R8Xtu.js";import{l as Ve,e as re,f as he,b as X,r as Ye}from"../chunks/store.e9OfJAL2.js";import{i as Je,p as M}from"../chunks/proxy.C8AY2hvm.js";import{p as z,b as me,o as Ke}from"../chunks/index-client.CnOVtTXY.js";import{i as B}from"../chunks/if.BzJE_1JZ.js";import{s as ge,r as Xe,b as ie}from"../chunks/input.BJqBjsij.js";function pe(a,e){return e}function Ge(a,e,t,n){for(var r=[],i=e.length,l=0;l<i;l++)Pe(e[l].e,r,!0);var h=i>0&&r.length===0&&t!==null;if(h){var p=t.parentNode;Ce(p),p.append(t),n.clear(),C(a,e[0].prev,e[i-1].next)}De(r,()=>{for(var g=0;g<i;g++){var o=e[g];h||(n.delete(o.k),C(a,o.prev,o.next)),Fe(o.e,!h)}})}function _e(a,e,t,n,r,i=null){var l=a,h={flags:e,items:new Map,first:null};{var p=a;l=A?ee(Oe(p)):p.appendChild(Re())}A&&Se();var g=null,o=!1;Te(()=>{var m=t(),v=Ne(m)?m:m==null?[]:ce(m),s=v.length;if(o&&s===0)return;o=s===0;let u=!1;if(A){var c=l.data===Le;c!==(s===0)&&(l=se(),ee(l),te(!1),u=!0)}if(A){for(var _=null,f,k=0;k<s;k++){if(q.nodeType===8&&q.data===Ie){l=q,u=!0,te(!1);break}var S=v[k],T=n(S,k);f=be(q,h,_,null,S,T,k,r,e),h.items.set(T,f),_=f}s>0&&ee(se())}if(!A){var w=Me;Qe(v,h,l,r,e,(w.f&G)!==0,n)}i!==null&&(s===0?g?ue(g):g=ve(()=>i(l)):g!==null&&Ee(g,()=>{g=null})),u&&te(!0),t()}),A&&(l=q)}function Qe(a,e,t,n,r,i,l){var h=a.length,p=e.items,g=e.first,o=g,m,v=null,s=[],u=[],c,_,f,k;for(k=0;k<h;k+=1){if(c=a[k],_=l(c,k),f=p.get(_),f===void 0){var S=o?o.e.nodes_start:t;v=be(S,e,v,v===null?e.first:v.next,c,_,k,n,r),p.set(_,v),s=[],u=[],o=v.next;continue}if(We(f,c,k),f.e.f&G&&ue(f.e),f!==o){if(m!==void 0&&m.has(f)){if(s.length<u.length){var T=u[0],w;v=T.prev;var b=s[0],H=s[s.length-1];for(w=0;w<s.length;w+=1)de(s[w],T,t);for(w=0;w<u.length;w+=1)m.delete(u[w]);C(e,b.prev,H.next),C(e,v,b),C(e,H,T),o=T,v=H,k-=1,s=[],u=[]}else m.delete(f),de(f,o,t),C(e,f.prev,f.next),C(e,f,v===null?e.first:v.next),C(e,v,f),v=f;continue}for(s=[],u=[];o!==null&&o.k!==_;)(i||!(o.e.f&G))&&(m??(m=new Set)).add(o),u.push(o),o=o.next;if(o===null)continue;f=o}s.push(f),v=f,o=f.next}if(o!==null||m!==void 0){for(var N=m===void 0?[]:ce(m);o!==null;)(i||!(o.e.f&G))&&N.push(o),o=o.next;var L=N.length;if(L>0){var W=h===0?t:null;Ge(e,N,W,p)}}oe.first=e.first&&e.first.e,oe.last=v&&v.e}function We(a,e,t,n){Ae(a.v,e),a.i=t}function be(a,e,t,n,r,i,l,h,p){var g=(p&qe)!==0,o=(p&Be)===0,m=g?o?He(r):le(r):r,v=p&Ue?le(l):l,s={i:v,v:m,k:i,a:null,e:null,prev:t,next:n};try{return s.e=ve(()=>h(a,m,v),A),s.e.prev=t&&t.e,s.e.next=n&&n.e,t===null?e.first=s:(t.next=s,t.e.next=s.e),n!==null&&(n.prev=s,n.e.prev=s.e),s}finally{}}function de(a,e,t){for(var n=a.next?a.next.e.nodes_start:t,r=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==n;){var l=je(i);r.before(i),i=l}}function C(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function ke(a,e){var t=a.__className,n=Ze(e);A&&a.className===n?a.__className=n:(t!==n||A&&a.className!==n)&&(e==null?a.removeAttribute("class"):a.className=n,a.__className=n)}function Ze(a){return a??""}function ye(a,e,t){if(a.multiple)return tt(a,e);for(var n of a.options){var r=V(n);if(Je(r,e)){n.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function $e(a,e){fe(()=>{var t=new MutationObserver(()=>{var n=a.__value;ye(a,n)});return t.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function et(a,e,t=e){var n=!0;Ve(a,"change",r=>{var i=r?"[selected]":":checked",l;if(a.multiple)l=[].map.call(a.querySelectorAll(i),V);else{var h=a.querySelector(i)??a.querySelector("option:not([disabled])");l=h&&V(h)}t(l)}),fe(()=>{var r=e();if(ye(a,r,n),n&&r===void 0){var i=a.querySelector(":checked");i!==null&&(r=V(i),t(r))}a.__value=r,n=!1}),$e(a)}function tt(a,e){for(var t of a.options)t.selected=~e.indexOf(V(t))}function V(a){return"__value"in a?a.__value:a.value}const at=5e-4,rt=["created","open","closed","canceled"],nt=["btc","eth","ada"],st=["1min","3min","15min"],ot={status:"created",date:Date.now(),report:"",note:"",symbol:"btc",timeFrame:"3min",longShort:"long",risk:0,riskRewardRatio:"",account:0,amount:0,entry:0,takeProfit:0,stopLoss:0,pnl:0,taker:at,maker:0};function lt(a,e,t,n){if(!n||!t)return 0;const r=Math.abs(n/t-1);return we(e/a*r,4)}function it(a,e){return e<a?"long":"short"}function dt(a,e,t,n){if(!e||!t||!n)return 0;const r=e-n/t*e;return we(a=="long"?r*-1:r,2)}function ct(a,e,t){const n=Math.abs(a-t),r=Math.abs(a-e),i=Math.min(n,r),l=Math.round(n/i*10)/10,h=Math.round(r/i*10)/10;return l+" / "+h}function we(a,e){return Number(a.toFixed(e))}var ut=(a,e)=>!e()&&a.stopPropagation(),vt=O('<option class="svelte-pz2dud"> </option>'),ft=O('<select class="svelte-pz2dud"></select>'),ht=O("<td><!></td>");function x(a,e){Y(e,!0);let t=z(e,"value",15),n=z(e,"disabled",3,!0),r=z(e,"options",19,()=>[]);const i=o=>{switch(e.type){case"text":t(o.currentTarget.innerText);break;case"currency":t(Number(o.currentTarget.innerText));break;case"date":t(new Date(o.currentTarget.innerText).valueOf());break}};var l=ht();l.__dblclick=[ut,n];var h=F(l);{var p=o=>{var m=Z();P(()=>X(m,t())),R(o,m)},g=o=>{var m=$(),v=j(m);{var s=c=>{var _=Z();P(()=>X(_,new Date(Number(t())).toLocaleString("en-GB",{timeZone:"UTC"}))),R(c,_)},u=c=>{var _=$(),f=j(_);{var k=S=>{var T=$(),w=j(T);{var b=N=>{var L=Z();P(()=>X(L,t())),R(N,L)},H=N=>{var L=ft();_e(L,21,r,pe,(W,K)=>{var U=vt(),ne={},xe=F(U,!0);E(U),P(()=>{ne!==(ne=d(K))&&(U.value=(U.__value=d(K))==null?"":d(K)),X(xe,d(K))}),R(W,U)}),E(L),P(()=>L.disabled=n()),et(L,t),R(N,L)};B(w,N=>{n()?N(b):N(H,!1)})}R(S,T)};B(f,S=>{e.type=="select"&&S(k)},!0)}R(c,_)};B(v,c=>{e.type=="date"?c(s):c(u,!1)},!0)}R(o,m)};B(h,o=>{e.type=="text"||e.type=="currency"?o(p):o(g,!1)})}E(l),P(()=>{ge(l,"contenteditable",n()||e.type=="select"?!1:"plaintext-only"),ke(l,`${e.type??""} svelte-pz2dud`)}),he("blur",l,i),R(a,l),J()}re(["dblclick"]);const mt=(a,e,t)=>{e()({...t,longShort:it(t.entry,t.stopLoss),risk:lt(t.account,t.amount,t.entry,t.stopLoss),riskRewardRatio:ct(t.entry,t.takeProfit,t.stopLoss),pnl:dt(t.longShort,t.amount,t.entry,t.exit)})};var gt=(a,e,t)=>e()(t),pt=O("<tr><!><!><!><!><!><!><!><!><!><!><!><!><!><!></tr>");function _t(a,e){Y(e,!0);let t=z(e,"onchange",3,()=>{}),n=z(e,"ondblclick",3,()=>{}),r=M(e.trade),i=ae(()=>r.status=="closed"||r.status=="canceled");var l=pt();l.__dblclick=[gt,n,r],l.__change=[mt,t,r];var h=F(l);x(h,{type:"select",options:rt,disabled:!1,get value(){return r.status},set value(b){r.status=b}});var p=y(h);x(p,{type:"date",get disabled(){return d(i)},get value(){return r.date},set value(b){r.date=b}});var g=y(p);x(g,{type:"select",options:nt,get disabled(){return d(i)},get value(){return r.symbol},set value(b){r.symbol=b}});var o=y(g);x(o,{type:"select",options:st,get disabled(){return d(i)},get value(){return r.timeFrame},set value(b){r.timeFrame=b}});var m=y(o);x(m,{type:"text",get value(){return r.longShort}});var v=y(m);x(v,{type:"currency",get disabled(){return d(i)},get value(){return r.account},set value(b){r.account=b}});var s=y(v);x(s,{type:"currency",get disabled(){return d(i)},get value(){return r.amount},set value(b){r.amount=b}});var u=y(s);x(u,{type:"currency",get disabled(){return d(i)},get value(){return r.entry},set value(b){r.entry=b}});var c=y(u);x(c,{type:"currency",get disabled(){return d(i)},get value(){return r.takeProfit},set value(b){r.takeProfit=b}});var _=y(c);x(_,{type:"currency",get disabled(){return d(i)},get value(){return r.stopLoss},set value(b){r.stopLoss=b}});var f=y(_);x(f,{type:"currency",get disabled(){return d(i)},get value(){return r.exit},set value(b){r.exit=b}});var k=y(f),S=ae(()=>"%"+(r.risk*100).toFixed(2));x(k,{type:"text",get value(){return d(S)}});var T=y(k);x(T,{type:"text",get value(){return r.riskRewardRatio}});var w=y(T);x(w,{type:"currency",get value(){return r.pnl}}),E(l),P(()=>ke(l,`${r.status??""} svelte-xfwjdn`)),R(a,l),J()}re(["dblclick","change"]);var bt=O('<textarea placeholder="Describe how the trade went"></textarea> <input placeholder="https://www.tradingview.com/x/HEUPOgtN/"> <img alt="Chart" class="svelte-5cpl6x">',1),kt=O('<dialog class="svelte-5cpl6x"><div class="flex-column gap-1"><!></div></dialog>');function yt(a,e){Y(e,!0);let t=I(void 0),n=I(void 0),r=I(s=>{}),i=ae(()=>d(n)==null||d(n).status=="closed"||d(n).status=="canceled"),l=I("");ze(()=>{var _,f;const s=(_=d(n))==null?void 0:_.report.match(new RegExp("(?<=https:\\/\\/www.tradingview.com\\/x\\/)(.*)(?=\\/)","g")),u=s==null?void 0:s[0],c=(f=u==null?void 0:u[0])==null?void 0:f.toLowerCase();D(l,`https://s3.tradingview.com/snapshots/${c}/${u}.png`)});const h=()=>{var s;d(r)(d(n)),(s=d(t))==null||s.close()},p=(s,u)=>{var c;D(n,M(s)),D(r,M(u)),(c=d(t))==null||c.showModal()};var g=kt(),o=F(g),m=F(o);{var v=s=>{var u=bt(),c=j(u);Ye(c);var _=y(c,2);Xe(_);var f=y(_,2);P(()=>{c.disabled=d(i),_.disabled=d(i),ge(f,"src",d(l))}),ie(c,()=>d(n).note,k=>d(n).note=k),ie(_,()=>d(n).report,k=>d(n).report=k),R(s,u)};B(m,s=>{d(n)&&s(v)})}return E(o),E(g),me(g,s=>D(t,s),()=>d(t)),he("close",g,h),R(a,g),J({show:p})}var wt=O("<table><thead><tr><th>STATUS</th><th>DATE</th><th>SYMBOL</th><th>TF</th><th>L / S</th><th>ACCOUNT</th><th>AMOUNT</th><th>ENTRY</th><th>TP</th><th>SL</th><th>EXIT</th><th>RISK</th><th>R/R</th><th>PNL</th></tr></thead><tbody></tbody></table>");function xt(a,e){Y(e,!0);const t=(i,l)=>{e.onchange(e.trades.toSpliced(i,1,l))};var n=wt(),r=y(F(n));_e(r,21,()=>e.trades,pe,(i,l,h)=>{_t(i,{get trade(){return d(l)},onchange:p=>t(h,p),get ondblclick(){return e.ondblclick}})}),E(r),E(n),R(a,n),J()}const Rt=[{status:"created",date:1735503550070,report:"",note:"",symbol:"ada",timeFrame:"3min",longShort:"short",risk:0,riskRewardRatio:"NaN / NaN",account:0,amount:0,entry:0,takeProfit:0,stopLoss:0,pnl:0,taker:5e-4,maker:0},{status:"canceled",date:1735420027877,report:"https://www.tradingview.com/x/HEUPOgtN/",note:"",symbol:"btc",timeFrame:"3min",longShort:"short",risk:0,riskRewardRatio:"NaN / NaN",account:0,amount:0,entry:0,takeProfit:0,stopLoss:0,pnl:0,taker:5e-4,maker:0},{status:"canceled",date:1734986784415,report:"https://www.tradingview.com/x/HEUPOgtN/",note:"Double bottom.",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0091,riskRewardRatio:"1 / 4.5",account:100,amount:370,entry:92472.5,takeProfit:93496,stopLoss:92245,pnl:0,taker:5e-4,maker:0},{status:"closed",date:1734982759567,report:"https://www.tradingview.com/x/A7kr8Bmg/",note:"Oksol van lowest low. Stop loss verplaatst mee naar boven. Alleen wss te strak.",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0093,riskRewardRatio:"1 / 4.5",account:100,amount:370,entry:92386.5,takeProfit:93431.5,stopLoss:92154.5,pnl:1.29,taker:5e-4,maker:0,exit:92707.5},{status:"closed",date:1734979570303,report:"",note:"Laagste punt. Stoploss coverde niet alles.",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0095,riskRewardRatio:"1 / 2.1",account:100,amount:380,entry:93839.5,takeProfit:94338.5,stopLoss:93605,pnl:-.93,taker:5e-4,maker:0,exit:93611},{status:"closed",date:1734979395575,report:"",note:"Lowest pull back",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0095,riskRewardRatio:"1 / 3.8",account:100,amount:380,entry:94802,takeProfit:95690,stopLoss:94565.5,pnl:1.15,taker:5e-4,maker:0,exit:95089},{status:"closed",date:1734979094261,report:"https://www.tradingview.com/x/CiEvJmfO/",note:"Short previous high. Stoploss verplaatst naar net boven de entry. Stoploss geraakt daarna door naar mijn tp.",symbol:"btc",longShort:"short",timeFrame:"3min",risk:.0098,riskRewardRatio:"1 / 3.4",account:100,amount:390,entry:96253.5,takeProfit:95436.5,stopLoss:96494.5,pnl:.12,taker:5e-4,maker:0,exit:96223},{status:"canceled",date:1734899158282,report:"",note:"V formatie",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0093,riskRewardRatio:"1 / 2",account:100,amount:370,entry:92386.5,takeProfit:92850,stopLoss:92154.5,pnl:0,taker:5e-4,maker:0},{status:"closed",date:1734899124326,report:"https://www.tradingview.com/x/7XttEIJx/",note:"Oksol van de impulse omhoog als we naar links kijken.",symbol:"btc",longShort:"long",timeFrame:"3min",risk:.0093,riskRewardRatio:"1 / 2",account:100,amount:370,entry:93736.5,takeProfit:94208,stopLoss:93501,pnl:1.86,taker:5e-4,maker:0,exit:94208},{status:"closed",date:1734862620746,report:"",note:"Prijs rejects de oksol. Doji en een grote rode candle. Entry op de close van de candle.",symbol:"btc",longShort:"short",timeFrame:"3min",risk:.0094,riskRewardRatio:"1 / 2",account:100,amount:490,entry:96999.5,takeProfit:96630,stopLoss:97185,pnl:-.94,taker:5e-4,maker:0,exit:97185}];class Q{static set(e){fetch("/",{method:"POST",body:JSON.stringify({trades:e}),headers:{"Content-Type":"application/json"}})}static get(){return Rt}static add(e){const t=this.get();t.findIndex(r=>r.date==e.date)==-1&&this.set([e,...t])}static update(e){const t=this.get(),n=t.findIndex(r=>r.date==e.date);n!=-1&&(t[n]=e,this.set(t))}}const Tt=()=>{Q.add(ot)};var St=O('<header class="flex-row align-items-center gap-2 svelte-1lndtu9"><h1 class="svelte-1lndtu9">Trading journal v5</h1> <button class="svelte-1lndtu9">Add trade</button></header> <div class="containerTable overflow-auto svelte-1lndtu9"><!></div> <!>',1);function Ft(a,e){Y(e,!0);let t=I(void 0),n=I(M([])),r=I(-1);const i=s=>{Q.set(s),s=s},l=s=>{var u;D(r,M(d(n).indexOf(s))),(u=d(t))==null||u.show(s,c=>{Q.update(c),D(r,-1)})};Ke(()=>{D(n,M(Q.get()));const s=u=>{if(d(r)!=-1){if(u.code=="ArrowLeft"){const c=d(n)[d(r)-1];c&&l(c)}else if(u.code=="ArrowRight"){const c=d(n)[d(r)+1];c&&l(c)}}};window.addEventListener("keydown",s)});var h=St(),p=j(h),g=y(F(p),2);g.__click=[Tt],E(p);var o=y(p,2),m=F(o);xt(m,{get trades(){return d(n)},onchange:i,ondblclick:l}),E(o);var v=y(o,2);me(yt(v,{}),s=>D(t,M(s)),()=>d(t)),R(a,h),J()}re(["click"]);export{Ft as component};
